{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container">

    <!-- Note Carousel -->
    <div id="noteCarousel" class="carousel slide mb-4" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="alert alert-info mb-0" role="alert">
                    <span style="text-transform: uppercase;font-weight: bold;color:black";>Note:</span>&nbsp; Order will be taken for the above menu
                </div>
            </div>
            <div class="carousel-item">
                <div class="alert alert-info mb-0" role="alert">
                    <span style="text-transform: uppercase;font-weight: bold;color:black";>Note:</span>&nbsp; Order should be placed before a week
                </div>
            </div>
            <div class="carousel-item">
                <div class="alert alert-info mb-0" role="alert">
                    <span style="text-transform: uppercase;font-weight: bold;color:black";>Note:</span>&nbsp; We undertake orders for small functions like kitty parties, get-together, bash, etc (serves a minimum of 150-200 members)
                </div>
            </div>
            <div class="carousel-item">
                <div class="alert alert-info mb-0" role="alert">
                    <span style="text-transform: uppercase;font-weight: bold;color:black";>Note:</span>&nbsp; For more details contact 9916552367 / 7795062367
                </div>
            </div>
            <div class="carousel-item">
                <div class="alert alert-info mb-0" role="alert">
                    <span style="text-transform: uppercase;font-weight: bold;color:black";>Note:</span>&nbsp; Happening now: Nibble Jubilee Snack Bar at St. Joseph University
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" href="#noteCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#noteCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    <!-- Product Carousels -->
    {% for category, items in categories.items %}
        {% if category == "powder" %}
            <h2 class="mt-4">{{ category|title }}</h2>
            <div id="carouselExampleControls{{ forloop.counter }}" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    {% for product in items %}
                        {% if forloop.counter0|divisibleby:4 %}
                            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                                <div class="row">
                        {% endif %}
                        
                        <div class="col-md-3">
                            <div class="card shadow-sm" style="height: 100%;">
                                {% if product.image %}
                                    <img src="{{ product.image.url }}" class="card-img-top" style="height: 200px; object-fit: cover;" alt="{{ product.name }}">
                                {% else %}
                                    <img src="{% static 'images/default.jpg' %}" class="card-img-top" style="height: 200px; object-fit: cover;" alt="Default Image">
                                {% endif %}
                                <div class="card-body" style="height: 150px;">
                                    <h5 class="card-title text-center">{{ product.name }}</h5>
                                    <!-- <p class="card-text">Price: ₹{{ product.price }}</p> -->
                                    <!-- <a href="{% url 'product_detail' product.pk %}" class="btn btn-primary">View Details</a> -->
                                </div>
                            </div>
                        </div>

                        {% if forloop.counter0|add:1|divisibleby:4 or forloop.last %}
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
                <a class="carousel-control-prev" href="#carouselExampleControls{{ forloop.counter }}" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls{{ forloop.counter }}" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        {% endif %}
    {% endfor %}

    {% for category, items in categories.items %}
        {% if category != "Powders" %}
            <h2 class="mt-4">{{ category|title }}</h2>
            <div id="carouselExampleControls{{ forloop.counter }}" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    {% for product in items %}
                        {% if forloop.counter0|divisibleby:4 %}
                            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                                <div class="row">
                        {% endif %}
                        
                        <div class="col-md-3">
                            <div class="card shadow-sm" style="height: 100%;">
                                {% if product.image %}
                                    <img src="{{ product.image.url }}" class="card-img-top" style="height: 200px; object-fit: cover;" alt="{{ product.name }}">
                                {% else %}
                                    <img src="{% static 'images/default.jpg' %}" class="card-img-top" style="height: 200px; object-fit: cover;" alt="Default Image">
                                {% endif %}
                                <div class="card-body" style="height: 150px;">
                                    <h5 class="card-title text-center">{{ product.name }}</h5>
                                    <!-- <p class="card-text">Price: ₹{{ product.price }}</p> -->
                                    <!-- <a href="{% url 'product_detail' product.pk %}" class="btn btn-primary">View Details</a> -->
                                </div>
                            </div>
                        </div>

                        {% if forloop.counter0|add:1|divisibleby:4 or forloop.last %}
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
                <a class="carousel-control-prev" href="#carouselExampleControls{{ forloop.counter }}" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls{{ forloop.counter }}" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        {% endif %}
    {% endfor %}
</div>
{% endblock %}

<!-- Bootstrap JS, Popper.js, and jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Custom script to initialize the carousel -->
<script>
    $(document).ready(function(){
        $('.carousel').carousel({
            interval: 3000,  // Adjust the interval as needed
            wrap: true
        });
    });
</script>
